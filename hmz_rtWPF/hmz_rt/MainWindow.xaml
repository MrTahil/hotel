<Window x:Class="RoomListApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:RoomListApp"
        mc:Ignorable="d"
        Title="Hotel Management Dashboard" Height="800" Width="1200"
        WindowStartupLocation="CenterScreen"
        Icon="Assets/logo_hmz_icon.ico">

    <Window.Resources>
        <local:StatusToButtonTextConverter x:Key="StatusToButtonTextConverter"/>
        <local:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
        <local:PaymentStatusToColorConverter x:Key="PaymentStatusToColorConverter"/>

        <!-- Card Style -->
        <Style x:Key="DashboardCard" TargetType="Border">
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Margin" Value="8"/>
            <Setter Property="Background" Value="#FFFFFF"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="15" ShadowDepth="5" Opacity="0.2"/>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <EventTrigger RoutedEvent="MouseEnter">
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                                           To="1.05" Duration="0:0:0.2"/>
                            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                           To="1.05" Duration="0:0:0.2"/>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
                <EventTrigger RoutedEvent="MouseLeave">
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleX)"
                                           To="1" Duration="0:0:0.2"/>
                            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                           To="1" Duration="0:0:0.2"/>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </Style.Triggers>
        </Style>

        <!-- Icon Style -->
        <Style x:Key="DashboardIcon" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="Segoe MDL2 Assets"/>
            <Setter Property="FontSize" Value="36"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
            <Setter Property="HorizontalAlignment" Value="Left"/>
        </Style>

        <!-- Title Style -->
        <Style x:Key="DashboardTitle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
        </Style>
        <!-- Button Styles -->
        <Style x:Key="BackButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#9333EA"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="Margin" Value="20,0,0,10"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border CornerRadius="6" Background="{TemplateBinding Background}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="AddButtonStyle" TargetType="Button" BasedOn="{StaticResource BackButtonStyle}">
            <Setter Property="Background" Value="#16A34A"/>
        </Style>

        <Style x:Key="EditButtonStyle" TargetType="Button" BasedOn="{StaticResource BackButtonStyle}">
            <Setter Property="Background" Value="#2563EB"/>
        </Style>

        <Style x:Key="DeleteButtonStyle" TargetType="Button" BasedOn="{StaticResource BackButtonStyle}">
            <Setter Property="Background" Value="#DC2626"/>
        </Style>

        <!-- Edit Panel Style -->
        <Style x:Key="EditPanelStyle" TargetType="Border">
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Margin" Value="20,0,20,10"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="8"/>
        </Style>

    </Window.Resources>

    <Grid Background="#F5F5F5">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="White" Padding="20" Margin="0,0,0,20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock x:Name="UserNameDisplay" 
                 Text="" 
                 FontSize="24" 
                 FontWeight="Bold" 
                 VerticalAlignment="Center"/>

                <StackPanel Grid.Column="1" 
                  Orientation="Horizontal" 
                  HorizontalAlignment="Right">
                    <TextBlock x:Name="CurrentTime" 
                     Text="12:00:00" 
                     VerticalAlignment="Center" 
                     Margin="0,0,20,0"/>
                    <Button Content="Kijelentkezés" 
                    Padding="15,8" 
                    Background="#dc2626" 
                    Foreground="White" 
                    BorderThickness="0"
                    Click="LogoutButton_Click">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="6"/>
                            </Style>
                        </Button.Resources>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Főoldal Grid -->
        <UniformGrid x:Name="dashboardGrid" Grid.Row="1" Columns="4" Margin="20" Visibility="Visible">
            <!-- Szobák kezelése -->
            <Border x:Name="szobak_kez" Style="{StaticResource DashboardCard}" Background="#EFF6FF" MouseLeftButtonDown="szobak_kez_MouseLeftButtonDown">
                <Border.RenderTransform>
                    <ScaleTransform/>
                </Border.RenderTransform>
                <StackPanel>
                    <TextBlock Text="&#xE8F4;" Style="{StaticResource DashboardIcon}" Foreground="#2563EB"/>
                    <TextBlock Text="Szobák kezelése" Style="{StaticResource DashboardTitle}" Foreground="#1E3A8A"/>
                </StackPanel>
            </Border>

            <!-- Foglalások kezelése -->
            <Border Style="{StaticResource DashboardCard}" Background="#F0FDF4" MouseLeftButtonDown="BookingsCard_MouseLeftButtonDown">
                <Border.RenderTransform>
                    <ScaleTransform/>
                </Border.RenderTransform>
                <StackPanel>
                    <TextBlock Text="&#xE787;" Style="{StaticResource DashboardIcon}" Foreground="#16A34A"/>
                    <TextBlock Text="Foglalások kezelése" Style="{StaticResource DashboardTitle}" Foreground="#14532D"/>
                </StackPanel>
            </Border>


            <!-- Dolgozók kezelése -->
            <Border Style="{StaticResource DashboardCard}" Background="#FAF5FF" MouseLeftButtonDown="Staff_MouseLeftButtonDown_1">
                <Border.RenderTransform>
                    <ScaleTransform/>
                </Border.RenderTransform>
                <StackPanel>
                    <TextBlock Text="&#xE716;" Style="{StaticResource DashboardIcon}" Foreground="#9333EA"/>
                    <TextBlock Text="Dolgozók kezelése" Style="{StaticResource DashboardTitle}" Foreground="#581C87"/>
                </StackPanel>
            </Border>

            <!-- Szoba takarítás kezelése -->
            <Border Style="{StaticResource DashboardCard}" Background="#FEFCE8">
                <Border.RenderTransform>
                    <ScaleTransform/>
                </Border.RenderTransform>
                <StackPanel>
                    <TextBlock Text="&#xE73E;" Style="{StaticResource DashboardIcon}" Foreground="#CA8A04"/>
                    <TextBlock Text="Szoba takarítás kezelése" Style="{StaticResource DashboardTitle}" Foreground="#713F12"/>
                </StackPanel>
            </Border>

            <!-- Értesítések kezelése -->
            <Border Style="{StaticResource DashboardCard}" Background="#FEF2F2">
                <Border.RenderTransform>
                    <ScaleTransform/>
                </Border.RenderTransform>
                <StackPanel>
                    <TextBlock Text="&#xE7E7;" Style="{StaticResource DashboardIcon}" Foreground="#DC2626"/>
                    <TextBlock Text="Értesítések kezelése" Style="{StaticResource DashboardTitle}" Foreground="#7F1D1D"/>
                </StackPanel>
            </Border>

            <!-- Email kiküldése -->
            <Border Style="{StaticResource DashboardCard}" Background="#EEF2FF">
                <Border.RenderTransform>
                    <ScaleTransform/>
                </Border.RenderTransform>
                <StackPanel>
                    <TextBlock Text="&#xE715;" Style="{StaticResource DashboardIcon}" Foreground="#4F46E5"/>
                    <TextBlock Text="Email kiküldése" Style="{StaticResource DashboardTitle}" Foreground="#312E81"/>
                </StackPanel>
            </Border>

            <!-- Beosztások -->
            <Border Style="{StaticResource DashboardCard}" Background="#FFF7ED">
                <Border.RenderTransform>
                    <ScaleTransform/>
                </Border.RenderTransform>
                <StackPanel>
                    <TextBlock Text="&#xE121;" Style="{StaticResource DashboardIcon}" Foreground="#EA580C"/>
                    <TextBlock Text="Beosztások" Style="{StaticResource DashboardTitle}" Foreground="#7C2D12"/>
                </StackPanel>
            </Border>

            <!-- Események kezelése -->
            <Border Style="{StaticResource DashboardCard}" Background="#F0FDFA">
                <Border.RenderTransform>
                    <ScaleTransform/>
                </Border.RenderTransform>
                <StackPanel>
                    <TextBlock Text="&#xE787;" Style="{StaticResource DashboardIcon}" Foreground="#0D9488"/>
                    <TextBlock Text="Események kezelése" Style="{StaticResource DashboardTitle}" Foreground="#134E4A"/>
                </StackPanel>
            </Border>

            <!-- Loyalty program -->
            <Border Style="{StaticResource DashboardCard}" Background="#FDF2F8">
                <Border.RenderTransform>
                    <ScaleTransform/>
                </Border.RenderTransform>
                <StackPanel>
                    <TextBlock Text="&#xE1CB;" Style="{StaticResource DashboardIcon}" Foreground="#DB2775"/>
                    <TextBlock Text="Loyalty program" Style="{StaticResource DashboardTitle}" Foreground="#831843"/>
                </StackPanel>
            </Border>

            <!-- Promóciók kezelése -->
            <Border Style="{StaticResource DashboardCard}" Background="#FFFBEB" MouseLeftButtonDown="PromotionsCard_MouseLeftButtonDown">
                <Border.RenderTransform>
                    <ScaleTransform/>
                </Border.RenderTransform>
                <StackPanel>
                    <TextBlock Text="&#xE789;" Style="{StaticResource DashboardIcon}" Foreground="#D97706"/>
                    <TextBlock Text="Promóciók kezelése" Style="{StaticResource DashboardTitle}" Foreground="#78350F"/>
                </StackPanel>
            </Border>
            <!-- Vendégek kezelése -->
            <Border Style="{StaticResource DashboardCard}" Background="#F0FDF4" MouseLeftButtonDown="Guest_MouseLeftButtonDown">
                <Border.RenderTransform>
                    <ScaleTransform/>
                </Border.RenderTransform>
                <StackPanel>
                    <TextBlock Text="&#xE77B;" 
                 Style="{StaticResource DashboardIcon}" 
                 Foreground="#0D9488"/>
                    <TextBlock Text="Vendégek kezelése" 
                 Style="{StaticResource DashboardTitle}" 
                 Foreground="#14532D"/>
                </StackPanel>
            </Border>


        </UniformGrid>

        <!-- Rooms Container -  -->
        <Grid x:Name="roomsContainer" Grid.Row="1" Visibility="Collapsed">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>


            <Button Grid.Row="0" 
                    Content="Vissza a főmenübe" 
                    HorizontalAlignment="Left" 
                    Margin="20,0,0,10" 
                    Padding="15,8" 
                    Background="#2563EB" 
                    Foreground="White" 
                    BorderThickness="0"
                    Click="BackButton_Click">
                <Button.Resources>
                    <Style TargetType="Border">
                        <Setter Property="CornerRadius" Value="6"/>
                    </Style>
                </Button.Resources>
            </Button>

            <!-- Rooms list -->
            <ListView x:Name="roomsListView" Grid.Row="1" Margin="20">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="ID" DisplayMemberBinding="{Binding RoomId}" Width="60"/>
                        <GridViewColumn Header="Szobaszám" DisplayMemberBinding="{Binding RoomNumber}" Width="100"/>
                        <GridViewColumn Header="Típus" DisplayMemberBinding="{Binding RoomType}" Width="150"/>
                        <GridViewColumn Header="Kapacitás" DisplayMemberBinding="{Binding Capacity}" Width="80"/>
                        <GridViewColumn Header="Ár/éj" DisplayMemberBinding="{Binding PricePerNight, StringFormat='{}{0:N0} Ft'}" Width="120"/>
                        <GridViewColumn Header="Állapot" DisplayMemberBinding="{Binding Status}" Width="120"/>
                        <GridViewColumn Header="Emelet" DisplayMemberBinding="{Binding FloorNumber}" Width="70"/>
                        <GridViewColumn Header="Hozzáadva" DisplayMemberBinding="{Binding DateAdded, StringFormat='{}{0:yyyy.MM.dd}'}" Width="100"/>
                        <GridViewColumn Header="Leírás" DisplayMemberBinding="{Binding Description}" Width="200"/>
                    </GridView>
                </ListView.View>

                <ListView.ItemContainerStyle>
                    <Style TargetType="ListViewItem">
                        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Status}" Value="Foglalt">
                                <Setter Property="Background" Value="#FEE2E2" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Status}" Value="Szabad">
                                <Setter Property="Background" Value="#DCFCE7" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Status}" Value="Takarítás alatt">
                                <Setter Property="Background" Value="#FEF3C7" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </ListView.ItemContainerStyle>
            </ListView>
        </Grid>
        <!-- Dolgozók Container - Will be shown when staff is selected -->
        <Grid x:Name="staffContainer" Grid.Row="1" Visibility="Collapsed">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Back button and Action buttons -->
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Back button -->
                <Button Grid.Column="0" 
                Content="Vissza a főmenübe" 
                HorizontalAlignment="Left" 
                Margin="20,0,0,10" 
                Padding="15,8" 
                Background="#9333EA" 
                Foreground="White" 
                BorderThickness="0"
                Click="StaffBackButton_Click">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="6"/>
                        </Style>
                    </Button.Resources>
                </Button>

                <!-- Action buttons -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,20,10">
                    <Button x:Name="AddStaffButton"
                    Content="Új dolgozó" 
                    Margin="5,0" 
                    Padding="15,8" 
                    Background="#16A34A" 
                    Foreground="White" 
                    BorderThickness="0"
                    Click="AddStaffButton_Click">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="6"/>
                            </Style>
                        </Button.Resources>
                    </Button>
                    <Button x:Name="EditStaffButton"
                    Content="Szerkesztés" 
                    Margin="5,0" 
                    Padding="15,8" 
                    Background="#2563EB" 
                    Foreground="White" 
                    BorderThickness="0"
                    Click="EditStaffButton_Click">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="6"/>
                            </Style>
                        </Button.Resources>
                    </Button>
                    <Button x:Name="DeleteStaffButton"
                    Content="Törlés" 
                    Margin="5,0" 
                    Padding="15,8" 
                    Background="#DC2626" 
                    Foreground="White" 
                    BorderThickness="0"
                    Click="DeleteStaffButton_Click">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="6"/>
                            </Style>
                        </Button.Resources>
                    </Button>
                </StackPanel>
            </Grid>

            <!-- Staff edit form -->
            <Border x:Name="staffEditPanel" Grid.Row="1" Padding="20" Margin="20,0,20,10" Background="White" CornerRadius="8" Visibility="Collapsed">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- First name -->
                    <StackPanel Grid.Column="0" Grid.Row="0" Margin="5">
                        <TextBlock Text="Keresztnév" Margin="0,0,0,5"/>
                        <TextBox x:Name="FirstNameTextBox" Padding="5"/>
                    </StackPanel>

                    <!-- Last name -->
                    <StackPanel Grid.Column="1" Grid.Row="0" Margin="5">
                        <TextBlock Text="Vezetéknév" Margin="0,0,0,5"/>
                        <TextBox x:Name="LastNameTextBox" Padding="5"/>
                    </StackPanel>

                    <!-- Email -->
                    <StackPanel Grid.Column="2" Grid.Row="0" Margin="5">
                        <TextBlock Text="Email" Margin="0,0,0,5"/>
                        <TextBox x:Name="StaffEmailTextBox" Padding="5"/>
                    </StackPanel>

                    <!-- Phone number -->
                    <StackPanel Grid.Column="3" Grid.Row="0" Margin="5">
                        <TextBlock Text="Telefonszám" Margin="0,0,0,5"/>
                        <TextBox x:Name="PhoneTextBox" Padding="5"/>
                    </StackPanel>

                    <!-- Position -->
                    <StackPanel Grid.Column="0" Grid.Row="1" Margin="5">
                        <TextBlock Text="Pozíció" Margin="0,0,0,5"/>
                        <TextBox x:Name="PositionTextBox" Padding="5"/>
                    </StackPanel>

                    <!-- Salary -->
                    <StackPanel Grid.Column="1" Grid.Row="1" Margin="5">
                        <TextBlock Text="Fizetés" Margin="0,0,0,5"/>
                        <TextBox x:Name="SalaryTextBox" Padding="5"/>
                    </StackPanel>

                    <!-- Status -->
                    <StackPanel Grid.Column="2" Grid.Row="1" Margin="5">
                        <TextBlock Text="Státusz" Margin="0,0,0,5"/>
                        <ComboBox x:Name="StatusComboBox" Padding="5">
                            <ComboBoxItem Content="Aktív"/>
                            <ComboBoxItem Content="Inaktív"/>
                            <ComboBoxItem Content="Szabadságon"/>
                        </ComboBox>
                    </StackPanel>

                    <!-- Department -->
                    <StackPanel Grid.Column="3" Grid.Row="1" Margin="5">
                        <TextBlock Text="Részleg" Margin="0,0,0,5"/>
                        <TextBox x:Name="DepartmentTextBox" Padding="5"/>
                    </StackPanel>

                    <!-- Action buttons -->
                    <StackPanel Grid.Column="0" Grid.ColumnSpan="4" Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                        <Button x:Name="CancelEditButton"
                        Content="Mégse" 
                        Margin="5,0" 
                        Padding="15,8" 
                        Background="#6B7280" 
                        Foreground="White" 
                        BorderThickness="0"
                        Click="CancelEditButton_Click">
                            <Button.Resources>
                                <Style TargetType="Border">
                                    <Setter Property="CornerRadius" Value="6"/>
                                </Style>
                            </Button.Resources>
                        </Button>
                        <Button x:Name="SaveStaffButton"
                        Content="Mentés" 
                        Margin="5,0" 
                        Padding="15,8" 
                        Background="#16A34A" 
                        Foreground="White" 
                        BorderThickness="0"
                        Click="SaveStaffButton_Click">
                            <Button.Resources>
                                <Style TargetType="Border">
                                    <Setter Property="CornerRadius" Value="6"/>
                                </Style>
                            </Button.Resources>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Staff list -->
            <ListView x:Name="staffListView" Grid.Row="2" Margin="20">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="ID" DisplayMemberBinding="{Binding StaffId}" Width="60"/>
                        <GridViewColumn Header="Vezetéknév" DisplayMemberBinding="{Binding LastName}" Width="120"/>
                        <GridViewColumn Header="Keresztnév" DisplayMemberBinding="{Binding FirstName}" Width="120"/>
                        <GridViewColumn Header="Email" DisplayMemberBinding="{Binding Email}" Width="200"/>
                        <GridViewColumn Header="Telefonszám" DisplayMemberBinding="{Binding PhoneNumber}" Width="120"/>
                        <GridViewColumn Header="Pozíció" DisplayMemberBinding="{Binding Position}" Width="120"/>
                        <GridViewColumn Header="Fizetés" DisplayMemberBinding="{Binding Salary, StringFormat='{}{0:N0} Ft'}" Width="100"/>
                        <GridViewColumn Header="Felvétel Dátuma" DisplayMemberBinding="{Binding DateHired, StringFormat='{}{0:yyyy.MM.dd}'}" Width="120"/>
                        <GridViewColumn Header="Státusz" DisplayMemberBinding="{Binding Status}" Width="100"/>
                        <GridViewColumn Header="Részleg" DisplayMemberBinding="{Binding Department}" Width="120"/>
                    </GridView>
                </ListView.View>

                <ListView.ItemContainerStyle>
                    <Style TargetType="ListViewItem">
                        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Status}" Value="Aktív">
                                <Setter Property="Background" Value="#DCFCE7" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Status}" Value="Inaktív">
                                <Setter Property="Background" Value="#FEE2E2" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Status}" Value="Szabadságon">
                                <Setter Property="Background" Value="#FEF3C7" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </ListView.ItemContainerStyle>
            </ListView>
        </Grid>
        <!-- Promotions Container - Will be shown when promotions is selected -->
        <Grid x:Name="promotionsContainer" Grid.Row="1" Visibility="Collapsed">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Back button and Action buttons -->
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Back button -->
                <Button Grid.Column="0" 
                Content="Vissza a főmenübe" 
                HorizontalAlignment="Left" 
                Margin="20,0,0,10" 
                Padding="15,8" 
                Background="#D97706" 
                Foreground="White" 
                BorderThickness="0"
                Click="PromotionsBackButton_Click">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="6"/>
                        </Style>
                    </Button.Resources>
                </Button>

                <!-- Action buttons -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,20,10">
                    <Button x:Name="AddPromotionButton"
                    Content="Új promóció" 
                    Margin="5,0" 
                    Padding="15,8" 
                    Background="#16A34A" 
                    Foreground="White" 
                    BorderThickness="0"
                    Click="AddPromotionButton_Click">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="6"/>
                            </Style>
                        </Button.Resources>
                    </Button>
                    <Button x:Name="EditPromotionButton"
                    Content="Szerkesztés" 
                    Margin="5,0" 
                    Padding="15,8" 
                    Background="#2563EB" 
                    Foreground="White" 
                    BorderThickness="0"
                    Click="EditPromotionButton_Click">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="6"/>
                            </Style>
                        </Button.Resources>
                    </Button>
                    <Button x:Name="DeletePromotionButton"
                    Content="Törlés" 
                    Margin="5,0" 
                    Padding="15,8" 
                    Background="#DC2626" 
                    Foreground="White" 
                    BorderThickness="0"
                    Click="DeletePromotionButton_Click">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="6"/>
                            </Style>
                        </Button.Resources>
                    </Button>
                </StackPanel>
            </Grid>

            <!-- Promotion edit form -->
            <Border x:Name="promotionEditPanel" Grid.Row="1" Padding="20" Margin="20,0,20,10" Background="White" CornerRadius="8" Visibility="Collapsed">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Name -->
                    <StackPanel Grid.Column="0" Grid.Row="0" Margin="5">
                        <TextBlock Text="Promóció neve" Margin="0,0,0,5"/>
                        <TextBox x:Name="PromotionNameTextBox" Padding="5"/>
                    </StackPanel>

                    <!-- Description -->
                    <StackPanel Grid.Column="1" Grid.Row="0" Margin="5">
                        <TextBlock Text="Leírás" Margin="0,0,0,5"/>
                        <TextBox x:Name="DescriptionTextBox" Padding="5"/>
                    </StackPanel>

                    <!-- Start Date -->
                    <StackPanel Grid.Column="2" Grid.Row="0" Margin="5">
                        <TextBlock Text="Kezdő dátum" Margin="0,0,0,5"/>
                        <DatePicker x:Name="StartDatePicker" Padding="5"/>
                    </StackPanel>

                    <!-- End Date -->
                    <StackPanel Grid.Column="3" Grid.Row="0" Margin="5">
                        <TextBlock Text="Befejező dátum" Margin="0,0,0,5"/>
                        <DatePicker x:Name="EndDatePicker" Padding="5"/>
                    </StackPanel>

                    <!-- Discount Percentage -->
                    <StackPanel Grid.Column="0" Grid.Row="1" Margin="5">
                        <TextBlock Text="Kedvezmény (%)" Margin="0,0,0,5"/>
                        <TextBox x:Name="DiscountPercentageTextBox" Padding="5"/>
                    </StackPanel>

                    <!-- Terms and Conditions -->
                    <StackPanel Grid.Column="1" Grid.Row="1" Margin="5">
                        <TextBlock Text="Feltételek" Margin="0,0,0,5"/>
                        <TextBox x:Name="TermsConditionsTextBox" Padding="5"/>
                    </StackPanel>

                    <!-- Status -->
                    <StackPanel Grid.Column="2" Grid.Row="1" Margin="5">
                        <TextBlock Text="Státusz" Margin="0,0,0,5"/>
                        <ComboBox x:Name="PromotionStatusComboBox" Padding="5">
                            <ComboBoxItem Content="Aktív"/>
                            <ComboBoxItem Content="Inaktív"/>
                            <ComboBoxItem Content="Tervezett"/>
                        </ComboBox>
                    </StackPanel>


                    <!-- Room ID -->
                    <StackPanel Grid.Column="3" Grid.Row="1" Margin="5">
                        <TextBlock Text="Szoba ID" Margin="0,0,0,5"/>
                        <TextBox x:Name="RoomIdTextBox" Padding="5"/>
                    </StackPanel>

                    <!-- Action buttons -->
                    <StackPanel Grid.Column="0" Grid.ColumnSpan="4" Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                        <Button x:Name="CancelPromotionEditButton"
                        Content="Mégse" 
                        Margin="5,0" 
                        Padding="15,8" 
                        Background="#6B7280" 
                        Foreground="White" 
                        BorderThickness="0"
                        Click="CancelPromotionEditButton_Click">
                            <Button.Resources>
                                <Style TargetType="Border">
                                    <Setter Property="CornerRadius" Value="6"/>
                                </Style>
                            </Button.Resources>
                        </Button>
                        <Button x:Name="SavePromotionButton"
                        Content="Mentés" 
                        Margin="5,0" 
                        Padding="15,8" 
                        Background="#16A34A" 
                        Foreground="White" 
                        BorderThickness="0"
                        Click="SavePromotionButton_Click">
                            <Button.Resources>
                                <Style TargetType="Border">
                                    <Setter Property="CornerRadius" Value="6"/>
                                </Style>
                            </Button.Resources>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Promotions list -->
            <ListView x:Name="promotionsListView" Grid.Row="2" Margin="20">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="ID" DisplayMemberBinding="{Binding PromotionId}" Width="60"/>
                        <GridViewColumn Header="Név" DisplayMemberBinding="{Binding PromotionName}" Width="150"/>
                        <GridViewColumn Header="Leírás" DisplayMemberBinding="{Binding Description}" Width="200"/>
                        <GridViewColumn Header="Kezdés" DisplayMemberBinding="{Binding StartDate, StringFormat='{}{0:yyyy.MM.dd}'}" Width="100"/>
                        <GridViewColumn Header="Befejezés" DisplayMemberBinding="{Binding EndDate, StringFormat='{}{0:yyyy.MM.dd}'}" Width="100"/>
                        <GridViewColumn Header="Kedvezmény" DisplayMemberBinding="{Binding DiscountPercentage, StringFormat='{}{0}%'}" Width="100"/>
                        <GridViewColumn Header="Szoba ID" DisplayMemberBinding="{Binding RoomId}" Width="80"/>
                        <GridViewColumn Header="Státusz" DisplayMemberBinding="{Binding Status}" Width="100"/>
                        <GridViewColumn Header="Hozzáadva" DisplayMemberBinding="{Binding DateAdded, StringFormat='{}{0:yyyy.MM.dd}'}" Width="100"/>
                    </GridView>
                </ListView.View>

                <ListView.ItemContainerStyle>
                    <Style TargetType="ListViewItem">
                        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Status}" Value="Aktív">
                                <Setter Property="Background" Value="#DCFCE7" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Status}" Value="Inaktív">
                                <Setter Property="Background" Value="#FEE2E2" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Status}" Value="Tervezett">
                                <Setter Property="Background" Value="#FEF3C7" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </ListView.ItemContainerStyle>
            </ListView>
        </Grid>

        <!-- Vendégek Container - Akkor jelenik meg, amikor a vendégek kezelését választjuk -->
        <Grid x:Name="guestsContainer" Grid.Row="1" Visibility="Collapsed">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Vissza gomb és Műveleti gombok -->
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Vissza gomb -->
                <Button Grid.Column="0" 
        Content="Vissza a főmenübe" 
        HorizontalAlignment="Left" 
        Margin="20,0,0,10" 
        Padding="15,8" 
        Background="#3B82F6" 
        Foreground="White" 
        BorderThickness="0"
        Click="GuestsBackButton_Click">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="6"/>
                        </Style>
                    </Button.Resources>
                </Button>

                <!-- Műveleti gombok -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,20,10">
                    <Button x:Name="AddGuestButton"
            Content="Új vendég" 
            Margin="5,0" 
            Padding="15,8" 
            Background="#16A34A" 
            Foreground="White" 
            BorderThickness="0"
            Click="AddGuestButton_Click">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="6"/>
                            </Style>
                        </Button.Resources>
                    </Button>
                    <Button x:Name="EditGuestButton"
            Content="Szerkesztés" 
            Margin="5,0" 
            Padding="15,8" 
            Background="#2563EB" 
            Foreground="White" 
            BorderThickness="0"
            Click="EditGuestButton_Click">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="6"/>
                            </Style>
                        </Button.Resources>
                    </Button>
                    <Button x:Name="DeleteGuestButton"
            Content="Törlés" 
            Margin="5,0" 
            Padding="15,8" 
            Background="#DC2626" 
            Foreground="White" 
            BorderThickness="0"
            Click="DeleteGuestButton_Click">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="6"/>
                            </Style>
                        </Button.Resources>
                    </Button>
                </StackPanel>
            </Grid>

            <!-- Vendég szerkesztési űrlap -->
            <Border x:Name="guestEditPanel" Grid.Row="1" Padding="20" Margin="20,0,20,10" Background="White" CornerRadius="8" Visibility="Collapsed">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Keresztnév -->
                    <StackPanel Grid.Column="0" Grid.Row="0" Margin="5">
                        <TextBlock Text="Keresztnév" Margin="0,0,0,5"/>
                        <TextBox x:Name="GuestFirstNameTextBox" Padding="5"/>
                    </StackPanel>

                    <!-- Vezetéknév -->
                    <StackPanel Grid.Column="1" Grid.Row="0" Margin="5">
                        <TextBlock Text="Vezetéknév" Margin="0,0,0,5"/>
                        <TextBox x:Name="GuestLastNameTextBox" Padding="5"/>
                    </StackPanel>

                    <!-- Email -->
                    <StackPanel Grid.Column="2" Grid.Row="0" Margin="5">
                        <TextBlock Text="Email" Margin="0,0,0,5"/>
                        <TextBox x:Name="GuestEmailTextBox" Padding="5" LostFocus="GuestEmailTextBox_LostFocus"/>
                    </StackPanel>

                    <!-- Telefonszám -->
                    <StackPanel Grid.Column="3" Grid.Row="0" Margin="5">
                        <TextBlock Text="Telefonszám" Margin="0,0,0,5"/>
                        <TextBox x:Name="GuestPhoneTextBox" Padding="5"/>
                    </StackPanel>

                    <!-- Cím -->
                    <StackPanel Grid.Column="0" Grid.Row="1" Margin="5">
                        <TextBlock Text="Cím" Margin="0,0,0,5"/>
                        <TextBox x:Name="GuestAddressTextBox" Padding="5"/>
                    </StackPanel>

                    <!-- Város -->
                    <StackPanel Grid.Column="1" Grid.Row="1" Margin="5">
                        <TextBlock Text="Város" Margin="0,0,0,5"/>
                        <TextBox x:Name="GuestCityTextBox" Padding="5"/>
                    </StackPanel>

                    <!-- Ország -->
                    <StackPanel Grid.Column="2" Grid.Row="1" Margin="5">
                        <TextBlock Text="Ország" Margin="0,0,0,5"/>
                        <TextBox x:Name="GuestCountryTextBox" Padding="5"/>
                    </StackPanel>

                    <!-- Születési dátum -->
                    <StackPanel Grid.Column="3" Grid.Row="1" Margin="5">
                        <TextBlock Text="Születési dátum" Margin="0,0,0,5"/>
                        <DatePicker x:Name="GuestDateOfBirthPicker" Padding="5"/>
                    </StackPanel>

                    <!-- Nem -->
                    <StackPanel Grid.Column="0" Grid.Row="2" Margin="5">
                        <TextBlock Text="Nem" Margin="0,0,0,5"/>
                        <ComboBox x:Name="GuestGenderComboBox" Padding="5">
                            <ComboBoxItem Content="Férfi"/>
                            <ComboBoxItem Content="Nő"/>
                            <ComboBoxItem Content="Egyéb"/>
                        </ComboBox>
                    </StackPanel>

                    <!-- Felhasználó ID -->
                    <StackPanel Grid.Column="1" Grid.Row="2" Margin="5">
                        <TextBlock Text="Felhasználó ID" Margin="0,0,0,5"/>
                        <TextBox x:Name="GuestUserIdTextBox" Padding="5" IsReadOnly="True" Background="LightGray">
                            <TextBox.ToolTip>
                                <TextBlock Text="Az ID automatikusan beállításra kerül az email alapján" />
                            </TextBox.ToolTip>
                        </TextBox>
                    </StackPanel>

                    <!-- Műveleti gombok -->
                    <StackPanel Grid.Column="0" Grid.ColumnSpan="4" Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                        <Button x:Name="CancelGuestEditButton"
                Content="Mégse" 
                Margin="5,0" 
                Padding="15,8" 
                Background="#6B7280" 
                Foreground="White" 
                BorderThickness="0"
                Click="CancelGuestEditButton_Click">
                            <Button.Resources>
                                <Style TargetType="Border">
                                    <Setter Property="CornerRadius" Value="6"/>
                                </Style>
                            </Button.Resources>
                        </Button>
                        <Button x:Name="SaveGuestButton"
                Content="Mentés" 
                Margin="5,0" 
                Padding="15,8" 
                Background="#16A34A" 
                Foreground="White" 
                BorderThickness="0"
                Click="SaveGuestButton_Click">
                            <Button.Resources>
                                <Style TargetType="Border">
                                    <Setter Property="CornerRadius" Value="6"/>
                                </Style>
                            </Button.Resources>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Vendégek listája -->
            <ListView x:Name="guestsListView" Grid.Row="2" Margin="20">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="ID" DisplayMemberBinding="{Binding GuestId}" Width="60"/>
                        <GridViewColumn Header="Vezetéknév" DisplayMemberBinding="{Binding LastName}" Width="120"/>
                        <GridViewColumn Header="Keresztnév" DisplayMemberBinding="{Binding FirstName}" Width="120"/>
                        <GridViewColumn Header="Email" DisplayMemberBinding="{Binding Email}" Width="200"/>
                        <GridViewColumn Header="Telefonszám" DisplayMemberBinding="{Binding PhoneNumber}" Width="120"/>
                        <GridViewColumn Header="Cím" DisplayMemberBinding="{Binding Address}" Width="200"/>
                        <GridViewColumn Header="Város" DisplayMemberBinding="{Binding City}" Width="120"/>
                        <GridViewColumn Header="Ország" DisplayMemberBinding="{Binding Country}" Width="120"/>
                        <GridViewColumn Header="Születési dátum" DisplayMemberBinding="{Binding DateOfBirth, StringFormat='{}{0:yyyy.MM.dd}'}" Width="120"/>
                        <GridViewColumn Header="Nem" DisplayMemberBinding="{Binding Gender}" Width="80"/>
                        <GridViewColumn Header="Felhasználó ID" DisplayMemberBinding="{Binding UserId}" Width="100"/>
                    </GridView>
                </ListView.View>
            </ListView>
        </Grid>

        <!-- Foglalások Container - Akkor jelenik meg, amikor a foglalások kezelését választjuk -->
        <Grid x:Name="bookingsContainer" Grid.Row="1" Visibility="Collapsed">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Vissza gomb és Műveleti gombok -->
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Vissza gomb -->
                <Button Grid.Column="0" 
        Content="Vissza a főmenübe" 
        HorizontalAlignment="Left" 
        Margin="20,0,0,10" 
        Padding="15,8" 
        Background="#16A34A" 
        Foreground="White" 
        BorderThickness="0"
        Click="BookingsBackButton_Click">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="6"/>
                        </Style>
                    </Button.Resources>
                </Button>

                <!-- Műveleti gombok -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,20,10">
                    <Button x:Name="EditBookingButton"
            Content="Szerkesztés" 
            Margin="5,0" 
            Padding="15,8" 
            Background="#2563EB" 
            Foreground="White" 
            BorderThickness="0"
            Click="EditBookingButton_Click">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="6"/>
                            </Style>
                        </Button.Resources>
                    </Button>
                    <Button x:Name="DeleteBookingButton"
            Content="Törlés" 
            Margin="5,0" 
            Padding="15,8" 
            Background="#DC2626" 
            Foreground="White" 
            BorderThickness="0"
            Click="DeleteBookingButton_Click">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="6"/>
                            </Style>
                        </Button.Resources>
                    </Button>
                </StackPanel>
            </Grid>

            <!-- Foglalás szerkesztési űrlap -->
            <Border x:Name="bookingEditPanel" Grid.Row="1" Padding="20" Margin="20,0,20,10" Background="White" CornerRadius="8" Visibility="Collapsed">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Szoba kiválasztása -->
                    <StackPanel Grid.Column="0" Grid.Row="0" Margin="5">
                        <TextBlock Text="Szoba" Margin="0,0,0,5"/>
                        <ComboBox x:Name="RoomComboBox" Padding="5" DisplayMemberPath="RoomNumber" SelectedValuePath="RoomId" SelectionChanged="RoomComboBox_SelectionChanged"/>
                    </StackPanel>

                    <!-- Vendég kiválasztása -->
                    <StackPanel Grid.Column="1" Grid.Row="0" Margin="5">
                        <TextBlock Text="Vendég" Margin="0,0,0,5"/>
                        <ComboBox x:Name="GuestComboBox" Padding="5" DisplayMemberPath="FullName" SelectedValuePath="GuestId"/>
                    </StackPanel>

                    <!-- Bejelentkezés dátuma -->
                    <StackPanel Grid.Column="2" Grid.Row="0" Margin="5">
                        <TextBlock Text="Bejelentkezés dátuma" Margin="0,0,0,5"/>
                        <DatePicker x:Name="CheckInDatePicker" Padding="5" SelectedDateChanged="DatePicker_SelectedDateChanged"/>
                    </StackPanel>

                    <!-- Kijelentkezés dátuma -->
                    <StackPanel Grid.Column="3" Grid.Row="0" Margin="5">
                        <TextBlock Text="Kijelentkezés dátuma" Margin="0,0,0,5"/>
                        <DatePicker x:Name="CheckOutDatePicker" Padding="5" SelectedDateChanged="DatePicker_SelectedDateChanged"/>
                    </StackPanel>

                    <!-- Vendégek száma -->
                    <StackPanel Grid.Column="0" Grid.Row="1" Margin="5">
                        <TextBlock Text="Vendégek száma" Margin="0,0,0,5"/>
                        <TextBox x:Name="NumberOfGuestsTextBox" Padding="5" TextChanged="NumberOfGuestsTextBox_TextChanged"/>
                    </StackPanel>

                    <!-- Fizetési mód -->
                    <StackPanel Grid.Column="1" Grid.Row="1" Margin="5">
                        <TextBlock Text="Fizetési mód" Margin="0,0,0,5"/>
                        <ComboBox x:Name="PaymentMethodComboBox" Padding="5">
                            <ComboBoxItem Content="Készpénz"/>
                            <ComboBoxItem Content="Bankkártya"/>
                            <ComboBoxItem Content="Átutalás"/>
                            <ComboBoxItem Content="SZÉP kártya"/>
                        </ComboBox>
                    </StackPanel>

                    <!-- Összes ár -->
                    <StackPanel Grid.Column="2" Grid.Row="1" Margin="5">
                        <TextBlock Text="Teljes ár" Margin="0,0,0,5"/>
                        <TextBox x:Name="TotalPriceTextBox" Padding="5" IsReadOnly="True" Background="LightGray"/>
                    </StackPanel>

                    <!-- Műveleti gombok -->
                    <StackPanel Grid.Column="0" Grid.ColumnSpan="4" Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                        <Button x:Name="CancelBookingEditButton"
                Content="Mégse" 
                Margin="5,0" 
                Padding="15,8" 
                Background="#6B7280" 
                Foreground="White" 
                BorderThickness="0"
                Click="CancelBookingEditButton_Click">
                            <Button.Resources>
                                <Style TargetType="Border">
                                    <Setter Property="CornerRadius" Value="6"/>
                                </Style>
                            </Button.Resources>
                        </Button>
                        <Button x:Name="SaveBookingButton"
                Content="Mentés" 
                Margin="5,0" 
                Padding="15,8" 
                Background="#16A34A" 
                Foreground="White" 
                BorderThickness="0"
                Click="SaveBookingButton_Click">
                            <Button.Resources>
                                <Style TargetType="Border">
                                    <Setter Property="CornerRadius" Value="6"/>
                                </Style>
                            </Button.Resources>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Foglalások listája -->
            <ListView x:Name="bookingsListView" Grid.Row="2" Margin="20">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="ID" DisplayMemberBinding="{Binding BookingId}" Width="60"/>
                        <GridViewColumn Header="Vendég" DisplayMemberBinding="{Binding GuestName}" Width="150"/>
                        <GridViewColumn Header="Szoba" DisplayMemberBinding="{Binding RoomNumber}" Width="80"/>
                        <GridViewColumn Header="Bejelentkezés" DisplayMemberBinding="{Binding CheckInDate, StringFormat='{}{0:yyyy.MM.dd}'}" Width="120"/>
                        <GridViewColumn Header="Kijelentkezés" DisplayMemberBinding="{Binding CheckOutDate, StringFormat='{}{0:yyyy.MM.dd}'}" Width="120"/>
                        <!--<GridViewColumn Header="Létrehozva" DisplayMemberBinding="{Binding BookingDate, StringFormat='{}{0:yyyy.MM.dd HH:mm}'}" Width="150"/>-->
                        <GridViewColumn Header="Vendégek száma" DisplayMemberBinding="{Binding NumberOfGuests}" Width="120"/>
                        <GridViewColumn Header="Teljes ár" DisplayMemberBinding="{Binding TotalPrice, StringFormat='{}{0:N0} Ft'}" Width="120"/>
                        <GridViewColumn Header="Fizetés állapota" Width="120">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding PaymentStatus}"/>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                        <GridViewColumn Header="Fizetési mód" Width="120">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding PaymentMethod}"/>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                        <GridViewColumn Header="Fizetés" Width="120">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Fizetés" 
                    Tag="{Binding BookingId}"
                    Click="PaymentButton_Click"
                    Width="90"
                    Height="28"
                    Visibility="{Binding IsPaymentEnabled, Converter={StaticResource BooleanToVisibilityConverter}}">
                                        <Button.Resources>
                                            <Style TargetType="Border">
                                                <Setter Property="CornerRadius" Value="6"/>
                                            </Style>
                                        </Button.Resources>
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <Setter Property="Background" Value="#16A34A"/>
                                                <Setter Property="Foreground" Value="White"/>
                                            </Style>
                                        </Button.Style>
                                    </Button>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                        <!-- Állapot oszlop gombbal -->
                        <GridViewColumn Header="Státusz" Width="120">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <Button x:Name="StatusButton" 
                                   Content="{Binding Status, Converter={StaticResource StatusToButtonTextConverter}}"
                                   Tag="{Binding BookingId}"
                                   Click="StatusButton_Click"
                                   Width="100"
                                   Height="30">
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Status}" Value="Jóváhagyva">
                                                        <Setter Property="Content" Value="Check In"/>
                                                        <Setter Property="Background" Value="#DCFCE7"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding Status}" Value="Függőben">
                                                        <Setter Property="Content" Value="Check In"/>
                                                        <Setter Property="Background" Value="#FEF3C7"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding Status}" Value="Checked In">
                                                        <Setter Property="Content" Value="Check Out"/>
                                                        <Setter Property="Background" Value="#EFF6FF"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding Status}" Value="Finished">
                                                        <Setter Property="Content" Value="Lezárva"/>
                                                        <Setter Property="Background" Value="#D1D5DB"/>
                                                        <Setter Property="IsEnabled" Value="False"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding Status}" Value="Lemondva">
                                                        <Setter Property="Content" Value="Lemondva"/>
                                                        <Setter Property="Background" Value="#FEE2E2"/>
                                                        <Setter Property="IsEnabled" Value="False"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Button.Style>
                                    </Button>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>

                        <GridViewColumn Header="Visszajelzések" Width="100">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <Button Content="Megtekintés" 
                    Tag="{Binding BookingId}"
                    Click="ViewFeedback_Click"
                    Width="90"
                    Height="28"
                    Visibility="{Binding HasFeedback, Converter={StaticResource BooleanToVisibilityConverter}}">
                                        <Button.Resources>
                                            <Style TargetType="Border">
                                                <Setter Property="CornerRadius" Value="6"/>
                                            </Style>
                                        </Button.Resources>
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <Setter Property="Background" Value="#3B82F6"/>
                                                <Setter Property="Foreground" Value="White"/>
                                            </Style>
                                        </Button.Style>
                                    </Button>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                    </GridView>
                </ListView.View>

                <ListView.ItemContainerStyle>
                    <Style TargetType="ListViewItem">
                        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Status}" Value="Jóváhagyva">
                                <Setter Property="Background" Value="#DCFCE7" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Status}" Value="Lemondva">
                                <Setter Property="Background" Value="#FEE2E2" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Status}" Value="Függőben">
                                <Setter Property="Background" Value="#FEF3C7" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </ListView.ItemContainerStyle>
            </ListView>
        </Grid>
        <!-- Fizetési mód választó panel -->
        <Grid x:Name="paymentPanel" Grid.Row="1" Visibility="Collapsed">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Vissza gomb -->
            <Button Grid.Row="0" 
            Content="Vissza a foglalásokhoz" 
            HorizontalAlignment="Left" 
            Margin="20,0,0,10" 
            Padding="15,8" 
            Background="#16A34A" 
            Foreground="White" 
            BorderThickness="0"
            Click="PaymentBackButton_Click">
                <Button.Resources>
                    <Style TargetType="Border">
                        <Setter Property="CornerRadius" Value="6"/>
                    </Style>
                </Button.Resources>
            </Button>

            <!-- Fizetési mód választó űrlap -->
            <Border Grid.Row="1" Background="White" Margin="100,20,100,100" CornerRadius="8">
                <Grid Margin="30">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Text="Válassza ki a fizetési módot" 
                       FontSize="24" FontWeight="SemiBold" Margin="0,0,0,20"/>

                    <StackPanel Grid.Row="1">
                        <RadioButton x:Name="CashRadioButton" 
                             Content="Készpénz" 
                             GroupName="PaymentMethods" 
                             Margin="0,10" 
                             IsChecked="True"
                             FontSize="16"/>

                        <RadioButton x:Name="CardRadioButton" 
                             Content="Bankkártya" 
                             GroupName="PaymentMethods" 
                             Margin="0,10"
                             FontSize="16"/>

                        <RadioButton x:Name="TransferRadioButton" 
                             Content="Átutalás" 
                             GroupName="PaymentMethods" 
                             Margin="0,10"
                             FontSize="16"/>

                        <RadioButton x:Name="SzepCardRadioButton" 
                             Content="SZÉP kártya" 
                             GroupName="PaymentMethods" 
                             Margin="0,10"
                             FontSize="16"/>
                    </StackPanel>

                    <Button Grid.Row="2" 
                    Content="Fizetés jóváhagyása" 
                    HorizontalAlignment="Right"
                    Margin="0,20,0,0" 
                    Padding="20,10" 
                    Background="#16A34A" 
                    Foreground="White" 
                    BorderThickness="0"
                    Click="ConfirmPaymentButton_Click">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="6"/>
                            </Style>
                        </Button.Resources>
                    </Button>
                </Grid>
            </Border>
        </Grid>



    </Grid>
</Window>
